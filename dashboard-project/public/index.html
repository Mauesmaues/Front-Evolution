<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Project</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/tabele.css">
  <link rel="stylesheet" href="css/stageManager.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <style>
    /* Anima√ß√£o do sino de notifica√ß√µes */
    @keyframes bell-ring {
      0% { transform: rotate(0deg); }
      10% { transform: rotate(15deg); }
      20% { transform: rotate(-15deg); }
      30% { transform: rotate(10deg); }
      40% { transform: rotate(-10deg); }
      50% { transform: rotate(5deg); }
      60% { transform: rotate(-5deg); }
      70% { transform: rotate(0deg); }
      100% { transform: rotate(0deg); }
    }
    
    #iconeSinoNotificacoes.fa-shake {
      animation: bell-ring 2s ease-in-out infinite;
    }
    
    /* Scrollbar customizada para o dropdown */
    #dropdownNotificacoesSaldo::-webkit-scrollbar {
      width: 6px;
    }
    
    #dropdownNotificacoesSaldo::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }
    
    #dropdownNotificacoesSaldo::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 10px;
    }
    
    #dropdownNotificacoesSaldo::-webkit-scrollbar-thumb:hover {
      background: #555;
    }
  </style>
</head>
<body>
  <header>
    <div id="headerLogo">
      <div id="logoIcon">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="32" height="32" rx="8" fill="#2563EB"/>
          <path d="m8 24V8h3l6 12 6-12h3v16h-3v-10l-5 10h-2l-5-10v10H8z" fill="white"/>
        </svg>
      </div>
      <div id="logoText">
        <span class="logo-name">SpacePrime</span>
        <span class="logo-tagline">Analytics Conceito Prime</span>
      </div>
    </div>
    <div id="headerUser">
      <!-- √çcone de Notifica√ß√µes de Saldo -->
      <div id="notificacoesSaldo" class="notification-icon-container" style="position: relative; margin-right: 20px;">
        <i class="fas fa-bell" id="iconeSinoNotificacoes" style="font-size: 20px; cursor: pointer; color: #333;"></i>
        <span id="badgeNotificacoes" class="badge bg-danger rounded-pill" style="position: absolute; top: -8px; right: -8px; display: none; font-size: 10px; min-width: 18px; padding: 2px 6px;">0</span>
        
        <!-- Dropdown de Notifica√ß√µes -->
        <div id="dropdownNotificacoesSaldo" class="notification-dropdown" style="display: none; position: absolute; top: 35px; right: 0; width: 320px; max-height: 400px; overflow-y: auto; background: white; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 9999;">
          <div style="padding: 12px 16px; border-bottom: 1px solid #eee; background: #f8f9fa; border-radius: 8px 8px 0 0; display: flex; justify-content: space-between; align-items: center;">
            <h6 style="margin: 0; font-weight: 600; color: #333;">
              <i class="fas fa-exclamation-triangle text-warning me-2"></i>Alertas de Saldo Baixo
            </h6>
            <button id="btnConfigNotificacoes" class="btn btn-sm" style="padding: 4px 8px; font-size: 12px; background: transparent; border: none; color: #6c757d;" title="Configurar n√∫meros para notifica√ß√£o">
              <i class="fas fa-phone-alt"></i>
            </button>
          </div>
          <div id="listaNotificacoesSaldo" style="padding: 8px;">
            <!-- Notifica√ß√µes ser√£o inseridas aqui -->
          </div>
        </div>
      </div>
      
      <div id="userInfo">
        <span id="headerLogin">Login</span>
        <div class="user-avatar">
          <i class="fas fa-user"></i>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div id="sidebar">
      <div id="sidebarMain">
        <ul id="navSidebar">
          <li id="dashboard" class="nav-item active">
            <i class="nav-icon fas fa-chart-line"></i>
            <span class="nav-text">Dashboard</span>
          </li>
          <li id="metricasVideo" class="nav-item">
            <i class="nav-icon fas fa-play-circle"></i>
            <span class="nav-text">M√©tricas de An√∫ncios</span>
          </li>
          <li id="administracao" class="nav-item admin-only">
            <i class="nav-icon fas fa-cog"></i>
            <span class="nav-text">Administra√ß√£o</span>
          </li>
          <li id="crm" class="nav-item">
            <i class="nav-icon fas fa-users"></i>
            <span class="nav-text">CRM</span>
          </li>
          <li id="Notificacoes" class="nav-item">
            <i class="nav-icon fas fa-bell"></i>
            <span class="nav-text">Notifica√ß√µes</span>
            <span id="badge" class="notification-badge">Conv</span>
          </li>
          <li id="proposta" class="nav-item">
            <i class="nav-icon fas fa-file-alt"></i>
            <span class="nav-text">Gerar Proposta</span>
          </li>
        </ul>
      </div>
      <div id="sidebarFooter">
        <div id="sair" class="nav-item logout-item">
          <i class="nav-icon fas fa-sign-out-alt"></i>
          <span class="nav-text">Sair</span>
        </div>
      </div>
    </div>

    <div id = "painelPrincipal">
      <!--Painel DashBoard-->
        <div id = "painelMonitoramento" data-theme="ativo">

          <section id="filtro">
            <select id="empresaFiltro" class="form-input filtro-empresa">
              <option value="todas">Todas as empresas</option>
              <!-- Adicione mais op√ß√µes conforme necess√°rio -->
            </select>
            
            <input type="date" id="dataInicio" class="form-input filtro-data" placeholder="Data de in√≠cio">
            <input type="date" id="dataFim" class="form-input filtro-data" placeholder="Data de t√©rmino">
            
            <div class="filtro-presets">
              <button class="btn-filtro-preset active" data-filtro="hoje">Hoje</button>
              <button class="btn-filtro-preset" data-filtro="ontem">Ontem</button>
              <button class="btn-filtro-preset" data-filtro="este-mes">Este m√™s</button>
              <button class="btn-filtro-preset" data-filtro="periodo-total">Per√≠odo total</button>
            </div>
            
            <button id="aplicarFiltro" class="btn btn-primary btn-aplicar">
              <i class="fas fa-filter"></i>Aplicar Filtros
            </button>
          </section>

          <section class="metricsGrid">
            <div class="metric-card">
              <div class="metric-icon">
                <i class="fas fa-mouse-pointer"></i>
              </div>
              <div class="metric-content">
                <div class="metric-value" id="cliques">0</div>
                <div class="metric-label">Cliques</div>
              </div>
            </div>
            
            <div class="metric-card">
              <div class="metric-icon">
                <i class="fas fa-eye"></i>
              </div>
              <div class="metric-content">
                <div class="metric-value" id="impressoes">0</div>
                <div class="metric-label">Impress√µes</div>
              </div>
            </div>
            
            <div class="metric-card">
              <div class="metric-icon">
                <i class="fas fa-users"></i>
              </div>
              <div class="metric-content">
                <div class="metric-value" id="alcance">0</div>
                <div class="metric-label">Alcance</div>
              </div>
            </div>
            
            <div class="metric-card">
              <div class="metric-icon cost">
                <i class="fas fa-dollar-sign"></i>
              </div>
              <div class="metric-content">
                <div class="metric-value" id="gasto">R$ 0,00</div>
                <div class="metric-label">Gasto</div>
              </div>
            </div>
            
            <div class="metric-card">
              <div class="metric-icon">
                <i class="fas fa-percentage"></i>
              </div>
              <div class="metric-content">
                <div class="metric-value" id="ctr">0%</div>
                <div class="metric-label">CTR</div>
              </div>
            </div>
            
            <div class="metric-card cost">
              <div class="metric-icon">
                <i class="fas fa-coins"></i>
              </div>
              <div class="metric-content">
                <div class="metric-value" id="cpc">R$ 0,00</div>
                <div class="metric-label">CPC</div>
              </div>
            </div>
            
            <div class="metric-card highlight">
              <div class="metric-icon success">
                <i class="fas fa-trophy"></i>
              </div>
              <div class="metric-content">
                <div class="metric-value" id="cpr">0</div>
                <div class="metric-label">Resultados</div>
              </div>
            </div>
            
            <div class="metric-card">
              <div class="metric-icon cost">
                <i class="fas fa-chart-line"></i>
              </div>
              <div class="metric-content">
                <div class="metric-value" id="cpl">R$ 0,00</div>
                <div class="metric-label">CPL</div>
              </div>
            </div>
          </section>

          <section id="dropDownEmpresa">

          </section>
        </div>

        <div id="painelMetricasVideo" data-theme="default" style="display: none;">
          <!-- Header do Painel -->
          <div id="headerMetricasVideo">
            <h2><i class="fas fa-play-circle me-2"></i>M√©tricas de An√∫ncios</h2>
            <div id="totalMetricas">
              <span class="total-info">
                <i class="fas fa-chart-bar me-1"></i>
                <span id="totalAnuncios">0</span> an√∫ncios
              </span>
            </div>
          </div>

          <!-- Filtros Modernos -->
          <div id="filtrosMetricasVideo">
            <select id="empresaFiltroVideo" class="form-input filtro-empresa">
              <option value="todas">Todas as empresas</option>
            </select>
            
            <input type="text" id="campanhaFiltroVideo" class="form-input filtro-campanha" placeholder="Nome da campanha">
            
            <input type="date" id="dataInicioVideo" class="form-input filtro-data">
            <input type="date" id="dataFimVideo" class="form-input filtro-data">
            
            <div class="filtro-presets">
              <button class="btn-filtro-preset active" data-filtro="hoje">Hoje</button>
              <button class="btn-filtro-preset" data-filtro="ontem">Ontem</button>
              <button class="btn-filtro-preset" data-filtro="este-mes">Este m√™s</button>
              <button class="btn-filtro-preset" data-filtro="periodo-total">Per√≠odo total</button>
            </div>
            
            <button id="aplicarFiltroMetricas" class="btn btn-primary btn-aplicar">
              <i class="fas fa-filter"></i>Aplicar Filtros
            </button>
          </div>

          <!-- Container dos Cards de Empresas -->
          <div id="conteudoMetricasVideo">
            <div id="cardsEmpresas">
              <!-- Cards das empresas ser√£o carregados aqui -->
            </div>
          </div>
        </div>

        <!--Painel Administra√ß√£o-->
      <div id="painelAdministracao" data-theme="default" style="display: none;">

        <div id="subAbasAdmin" class="btn-group">
          <button class="btn btn-outline" id="abaUsuario">Usu√°rio</button>
          <button class="btn btn-outline" id="abaEmpresas">Empresas</button>
          <button id="btnAdicionarSubAbaAdmin" class="btn btn-success" data-theme="usuario">
            <i class="fas fa-plus"></i>Adicionar Usuario
          </button>
        </div>

        <div id="conteudoSubAba">
          <!-- Conte√∫do da sub-aba Usu√°rio (futuro) -->
          <div id="subAbaUsuario">
            <p>Gest√£o de usu√°rios (em breve).</p>
          </div>
          <!-- Conte√∫do da sub-aba Empresas -->
          <div id="subAbaEmpresas">
          </div>
        </div>

        <div id="FormCadastroEmpresa" style="display: none;">
        </div>

        <div id="FormCadastroUsuario" style="display: none;">
        </div>
      </div>
      <!--Painel CRM-->
              <div class="card mb-4" id="crmSection" data-theme="default">
                <div class="card-header">
                    <!-- Header do CRM - Layout Compacto -->
                    <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-3">
                        <!-- T√≠tulo e Filtro de Empresa -->
                        <div class="d-flex align-items-center gap-3 flex-grow-1">
                            <h5 class="mb-0">
                                <i class="fas fa-users me-2"></i>CRM - Funil de Vendas
                            </h5>
                            
                            <!-- Filtro de Empresa Inline -->
                            <div class="d-flex align-items-center gap-2" style="min-width: 280px;">
                                <label for="filtroEmpresaCRM" class="form-label mb-0" style="font-size: 0.9rem; font-weight: 500; white-space: nowrap;">
                                    <i class="fas fa-building me-1"></i>Empresa:
                                </label>
                                <select id="filtroEmpresaCRM" class="form-select form-select-sm">
                                    <option value="">Carregando empresas...</option>
                                </select>
                            </div>
                            
                            <!-- Info de Leads Filtrados -->
                            <div id="infoLeadsFiltrados" class="text-muted" style="font-size: 0.85rem;">
                                <i class="fas fa-info-circle me-1"></i>
                                <span id="totalLeadsFiltrados">0</span> leads
                            </div>
                        </div>
                        
                        <!-- Bot√µes de A√ß√£o -->
                        <div class="actions d-flex gap-2">
                            <button id="btnGerenciarStages" class="btn btn-sm btn-outline-secondary" onclick="abrirModalStages()" title="Gerenciar Etapas">
                                <i class="fas fa-sliders-h me-1"></i>Gerenciar Etapas
                            </button>
                            <button id="addLeadBtn" class="btn btn-sm btn-primary">
                                <i class="fas fa-plus me-1"></i>Adicionar Lead
                            </button>
                            <!-- Bot√£o Trackeamento Avan√ßado -->
                            <button id="btnTrackeamentoAvancado" class="btn btn-sm btn-outline-primary ms-2" type="button">
                                <i class="fas fa-bullseye"></i> Trackeamento Avan√ßado
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card-body" style="position: relative; min-height: 500px;">
                    <!-- Loading inicial -->
                    <div id="crmLoadingContainer" style="
                        display: none;
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        background: var(--bg-card);
                        z-index: 10;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        gap: 1.5rem;
                    ">
                        <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
                            <span class="visually-hidden">Carregando...</span>
                        </div>
                        <div style="text-align: center;">
                            <h5 style="color: var(--text-primary); margin-bottom: 0.5rem;">
                                <i class="fas fa-sync fa-spin me-2"></i>Preparando CRM
                            </h5>
                            <p id="crmLoadingMessage" style="color: var(--text-secondary); font-size: 0.95rem;">
                                Carregando empresas dispon√≠veis...
                            </p>
                        </div>
                    </div>
                    
                    <!-- CRM Kanban Board -->
                    <div id="crmKanbanBoard">
                        <!-- Colunas ser√£o renderizadas dinamicamente via JavaScript -->
                    </div>
                </div>
          </div>

      <!--Painel Notifica√ß√µes-->
      <div id="painelNotificacoes" data-theme="default" style="display: none;">
        <div class="container-fluid px-4 py-4" style="width: 100%; max-width: none;">
          <!-- Header do Painel -->
          <div class="row mb-4">
            <div class="col-12">
              <div class="d-flex align-items-center justify-content-between">
                <div>
                  <h2 class="mb-1">
                    <i class="fas fa-bell me-2 text-primary"></i>
                    Gerenciar Notifica√ß√µes
                  </h2>
                  <p class="text-muted mb-0">Configure e gerencie notifica√ß√µes autom√°ticas</p>
                </div>
                <button id="btnCadastrarNotificacao" class="btn btn-primary">
                  <i class="fas fa-plus me-2"></i>
                  Cadastrar Notifica√ß√£o
                </button>

                              <div class="d-flex justify-content-end align-items-center gap-3">
                <label for="empresaFiltroNotificacoes" class="form-label mb-0 fw-bold">Filtrar por empresa:</label>
                <select id="empresaFiltroNotificacoes" class="form-select" style="width: 200px;">
                  <option value="">Todas as empresas</option>
                  <!-- Op√ß√µes ser√£o carregadas dinamicamente -->
                </select>
              </div>

              </div>
            </div>
          </div>


          <!-- Conte√∫do -->
          <div class="row">
            <div class="col-12">
              <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                  <h5 class="mb-0">
                    <i class="fas fa-list me-2"></i>
                    Notifica√ß√µes Cadastradas
                  </h5>
                </div>
                <div class="card-body">
                  <div class="table-responsive" style="max-height: 70vh; overflow-y: auto;">
                    <table class="table table-hover">
                      <thead>
                        <tr>
                          <th>Nome</th>
                          <th>Destinat√°rio</th>
                          <th>Hor√°rio</th>
                          <th>Empresas</th>
                          <th>Status</th>
                          <th>A√ß√µes</th>
                        </tr>
                      </thead>
                      <tbody id="tabelaNotificacoesBody">
                        <tr>
                          <td colspan="6" class="text-center text-muted py-4">
                            <i class="fas fa-inbox fa-2x mb-2"></i><br>
                            Nenhuma notifica√ß√£o criada ainda. Clique em "Cadastrar Notifica√ß√£o" para come√ßar.
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="mensagemNotificacao" class="mt-3"></div>
        </div>
      </div>

      <!--Painel Proposta-->
      <div id="painelProposta" data-theme="default" style="display: none;">
        <div class="container-fluid px-4 py-4" style="width: 100%; max-width: none; overflow: hidden;">
          <!-- Header do Painel -->
          <div class="row mb-4">
            <div class="col-12">
              <div class="d-flex align-items-center justify-content-between">
                <div>
                  <h2 class="mb-1">
                    <i class="fas fa-file-alt me-2 text-primary"></i>
                    Gerenciar Propostas
                  </h2>
                  <p class="text-muted mb-0">Crie e gerencie suas propostas comerciais</p>
                </div>
                <button id="btnCriarProposta" class="btn btn-primary">
                  <i class="fas fa-plus me-2"></i>
                  Criar Proposta
                </button>
              </div>
            </div>
          </div>

          <!-- Sub-abas -->
          <div class="row mb-4">
            <div class="col-12">
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group" role="group" id="subAbasPropostas">
                  <button type="button" class="btn btn-outline-primary active" id="abaPropostasGeradas">
                    <i class="fas fa-list me-2"></i>Propostas Geradas
                  </button>
                  <button type="button" class="btn btn-outline-primary" id="abaAberturas">
                    <i class="fas fa-eye me-2"></i>Aberturas
                  </button>
                  <button type="button" class="btn btn-outline-primary" id="abaVisuais">
                    <i class="fas fa-palette me-2"></i>Visuais
                  </button>
                </div>
                
                <!-- Filtro de Empresas -->
                <div class="d-flex align-items-center gap-3">
                  <label for="empresaFiltroPropostas" class="form-label mb-0 fw-bold">Filtrar por empresa:</label>
                  <select id="empresaFiltroPropostas" class="form-select" style="width: 200px;">
                    <option value="todas">Todas as empresas</option>
                    <!-- Op√ß√µes ser√£o carregadas dinamicamente -->
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Conte√∫do das Sub-abas -->
          <div class="row">
            <div class="col-12">
              <!-- Aba Propostas Geradas -->
              <div id="conteudoPropostasGeradas" class="sub-aba-content">
                <div class="card shadow-sm">
                  <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                      <i class="fas fa-list me-2"></i>
                      Propostas Geradas
                    </h5>
                  </div>
                  <div class="card-body">
                    <div class="table-responsive" style=" height: 70vh; overflow-y: auto;">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th>Nome da Proposta</th>
                            <th>Tipo</th>
                            <th>Empresas</th>
                            <th>Data de Cria√ß√£o</th>
                            <th>Status</th>
                            <th>A√ß√µes</th>
                          </tr>
                        </thead>
                        <tbody id="tabelaPropostasGeradas">
                          <tr>
                            <td colspan="6" class="text-center text-muted py-4">
                              <i class="fas fa-inbox fa-2x mb-2"></i><br>
                              Nenhuma proposta criada ainda. Clique em "Criar Proposta" para come√ßar.
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Aba Aberturas -->
              <div id="conteudoAberturas" class="sub-aba-content" style="display: none; height: 70vh; overflow-y: auto;">
                <div class="card shadow-sm">
                  <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                      <i class="fas fa-eye me-2"></i>
                      Hist√≥rico de Aberturas
                    </h5>
                  </div>
                  <div class="card-body">
                    <div class="table-responsive">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th>Nome da Proposta</th>
                            <th>Data/Hora da Abertura</th>
                            <th>Total de Visualiza√ß√µes</th>
                            <th>√öltima Visualiza√ß√£o</th>
                          </tr>
                        </thead>
                        <tbody id="tabelaAberturas">
                          <tr>
                            <td colspan="4" class="text-center text-muted py-4">
                              <i class="fas fa-chart-line fa-2x mb-2"></i><br>
                              Nenhuma abertura registrada ainda.
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Aba Visuais -->
              <div id="conteudoVisuais" class="sub-aba-content" style="display: none;">
                <div class="card shadow-sm">
                  <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                      <i class="fas fa-palette me-2"></i>
                      Personaliza√ß√£o Visual das Propostas
                    </h5>
                  </div>
                  <div class="card-body" style="height: 66vh; overflow-y: auto;">
                    <!-- Seletor de Empresa -->
                    
                    <div class="mb-4">
                      <label for="empresaFiltroVisuais" class="form-label fw-bold">
                        <i class="fas fa-building me-2"></i>Empresa
                      </label>
                      <select class="form-select" id="empresaFiltroVisuais">
                        <option value="">Selecione uma empresa...</option>
                      </select>
                    </div>

                    <!-- Container de Formul√°rio (inicialmente oculto) -->
                    <div id="containerFormularioVisuais">
                      <hr class="my-4">
                      
                      <div class="row" style="height: 49vh; overflow: hidden;">
                        <!-- Coluna Esquerda - Controles -->
                        <div class="col-md-6">
                          <!-- Upload de Logo -->
                          <div class="mb-4">
                            <label for="logoUpload" class="form-label fw-bold">
                              <i class="fas fa-image me-2"></i>Logo da Empresa
                            </label>
                            <div class="input-group">
                              <input 
                                type="file" 
                                class="form-control" 
                                id="logoUpload" 
                                accept="image/*"
                              >
                              <button class="btn btn-outline-secondary" type="button" id="btnRemoverLogo">
                                <i class="fas fa-trash"></i>
                              </button>
                            </div>
                            <small class="form-text text-muted">
                              Formatos aceitos: PNG, JPG, SVG (m√°x. 2MB)
                            </small>
                            <div id="logoPreview" class="mt-2" style="display: none;">
                              <img id="logoPreviewImg" src="" alt="Preview" style="max-width: 200px; max-height: 100px; border: 1px solid #ddd; border-radius: 8px; padding: 10px;">
                            </div>
                          </div>

                          <!-- Cor dos Objetos Flutuantes -->
                          <div class="mb-4">
                            <label for="corObjetosFlutuantes" class="form-label fw-bold">
                              <i class="fas fa-shapes me-2"></i>Cor dos Objetos Flutuantes
                            </label>
                            <div class="input-group">
                              <input 
                                type="color" 
                                class="form-control form-control-color" 
                                id="corObjetosFlutuantes" 
                                value="#00bcd4"
                                title="Escolha a cor dos objetos flutuantes"
                            >
                            <input 
                              type="text" 
                              class="form-control" 
                              id="corObjetosFlutuantesHex" 
                              value="#00bcd4"
                              pattern="^#[0-9A-Fa-f]{6}$"
                              placeholder="#00bcd4"
                            >
                          </div>
                          <small class="form-text text-muted">
                            Esta cor ser√° aplicada aos elementos decorativos
                          </small>
                        </div>

                        <!-- Cor de Fundo do Painel Esquerdo -->
                        <div class="mb-4">
                          <label for="corFundoPainelEsquerdo" class="form-label fw-bold">
                            <i class="fas fa-fill-drip me-2"></i>Cor de Fundo do Painel Esquerdo
                          </label>
                          <div class="input-group">
                            <input 
                              type="color" 
                              class="form-control form-control-color" 
                              id="corFundoPainelEsquerdo" 
                              value="#070707"
                              title="Escolha a cor de fundo"
                            >
                            <input 
                              type="text" 
                              class="form-control" 
                              id="corFundoPainelEsquerdoHex" 
                              value="#070707"
                              pattern="^#[0-9A-Fa-f]{6}$"
                              placeholder="#070707"
                            >
                          </div>
                          <small class="form-text text-muted">
                            Esta cor ser√° o fundo da se√ß√£o com a logo
                          </small>
                        </div>

                        <!-- Bot√µes de A√ß√£o -->
                        <div class="d-flex gap-2">
                          <button type="button" class="btn btn-primary flex-fill" id="btnSalvarVisuais">
                            <i class="fas fa-save me-2"></i>Salvar Altera√ß√µes
                          </button>
                          <button type="button" class="btn btn-outline-secondary" id="btnResetarVisuais">
                            <i class="fas fa-undo me-2"></i>Resetar
                          </button>
                        </div>
                      </div>

                      <!-- Coluna Direita - Preview -->
                      <div class="col-md-6">
                        <h6 class="mb-3 fw-bold">
                          <i class="fas fa-eye me-2"></i>
                          Pr√©-visualiza√ß√£o
                        </h6>
                        <div class="card" style="height: 35vh; overflow: hidden; border: 2px solid #ddd;">
                          <div id="previewContainer" style="display: flex; width: 100%; height: 100%;">
                            <!-- Painel Esquerdo -->
                            <div id="previewPainelEsquerdo" style="flex: 1; background: #070707; position: relative; display: flex; align-items: center; justify-content: center; overflow: hidden;">
                              <!-- Objetos Flutuantes -->
                              <div style="position: absolute; width: 100%; height: 100%; overflow: hidden;">
                                <div class="preview-shape preview-shape1" style="position: absolute; width: 50px; height: 50px; top: 15%; right: 10%; transform: rotate(45deg); border-radius: 8px; background: #00bcd4; opacity: 0.8;"></div>
                                <div class="preview-shape preview-shape2" style="position: absolute; width: 30px; height: 30px; top: 25%; right: 25%; border-radius: 50%; background: #00bcd4; opacity: 0.8;"></div>
                                <div class="preview-shape preview-shape3" style="position: absolute; width: 40px; height: 40px; bottom: 20%; left: 15%; transform: rotate(30deg); border-radius: 6px; background: #00bcd4; opacity: 0.8;"></div>
                                <div class="preview-shape preview-shape4" style="position: absolute; width: 20px; height: 20px; bottom: 35%; right: 15%; border-radius: 50%; background: #00bcd4; opacity: 0.8;"></div>
                              </div>
                              <!-- Logo -->
                              <div id="previewLogo" style="position: relative; z-index: 2; text-align: center;">
                                <img id="previewLogoImg" src="./img/BULBOX.png" alt="Logo" style="max-width: 80%; max-height: 150px; display: block; margin: 0 auto;">
                              </div>
                            </div>
                            <!-- Painel Direito (Formul√°rio) -->
                            <div style="flex: 1; background: #f5f5f5; display: flex; align-items: center; justify-content: center; padding: 20px;">
                              <div style="background: white; padding: 20px; border-radius: 8px; width: 90%; max-width: 250px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                <h6 style="color: #1e3a5f; margin-bottom: 15px; font-size: 0.9rem;">
                                  üöÄ Liberar Proposta
                                </h6>
                                <input type="text" placeholder="Nome" style="width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 0.8rem;">
                                <input type="text" placeholder="WhatsApp" style="width: 100%; padding: 8px; margin-bottom: 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 0.8rem;">
                                <button style="width: 100%; padding: 10px; background: #1e3a5f; color: white; border: none; border-radius: 4px; font-size: 0.85rem; font-weight: bold;">
                                  Quero ver!
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="alert alert-info mt-3" role="alert">
                          <i class="fas fa-info-circle me-2"></i>
                          <small>As altera√ß√µes ser√£o aplicadas √†s propostas desta empresa</small>
                        </div>
                      </div>
                    </div>
                    <!-- Fim do container do formul√°rio -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- Modal para Cadastro de Notifica√ß√£o -->
  <!-- Modal para Cadastro de Notifica√ß√£o -->
  <div id="modalCadastroNotificacao" class="modal fade" tabindex="-1" aria-labelledby="modalCadastroNotificacaoLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title" id="modalCadastroNotificacaoLabel">
            <i class="fas fa-bell me-2"></i>Cadastrar Nova Notifica√ß√£o
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="formCadastroNotificacao">
            <!-- Nome da Notifica√ß√£o -->
            <div class="mb-3">
              <label for="nomeNotificacao" class="form-label fw-bold">
                Nome da Notifica√ß√£o <span class="text-danger">*</span>
              </label>
              <input 
                type="text" 
                class="form-control" 
                id="nomeNotificacao" 
                placeholder="Ex: Relat√≥rio Di√°rio de Vendas"
                required>
              <div class="invalid-feedback">Por favor, insira o nome da notifica√ß√£o.</div>
            </div>

            <!-- N√∫mero do Destinat√°rio -->
            <div class="mb-3">
              <label for="numeroDestinatario" class="form-label fw-bold">
                N√∫mero do Destinat√°rio <span class="text-danger">*</span>
              </label>
              <input 
                type="tel" 
                class="form-control" 
                id="numeroDestinatario" 
                placeholder="(41) 99661-6801"
                value="41996616801"
                required>
              <div class="form-text">N√∫mero com DDD sem espa√ßos ou caracteres especiais</div>
              <div class="invalid-feedback">Por favor, insira um n√∫mero v√°lido.</div>
            </div>

            <!-- Sele√ß√£o de Empresas -->
            <div class="mb-3">
              <label class="form-label fw-bold">
                Empresas <span class="text-danger">*</span>
              </label>
              <div id="checkboxEmpresas" class="border rounded p-3" style="max-height: 200px; overflow-y: auto;">
                <!-- Checkboxes das empresas ser√£o carregadas aqui via JS -->
              </div>
              <div class="invalid-feedback" id="empresasError" style="display: none;">
                Por favor, selecione pelo menos uma empresa.
              </div>
            </div>

            <!-- Hor√°rio de Envio -->
            <div class="mb-3">
              <label for="horarioNotificacao" class="form-label fw-bold">
                Hor√°rio de Envio <span class="text-danger">*</span>
              </label>
              <input 
                type="time" 
                class="form-control" 
                id="horarioNotificacao" 
                value="09:00"
                required>
              <div class="form-text">Hor√°rio que a notifica√ß√£o ser√° enviada diariamente</div>
              <div class="invalid-feedback">Por favor, defina um hor√°rio.</div>
            </div>

            <!-- Status Ativo/Inativo -->
            <div class="mb-3">
              <div class="form-check form-switch">
                <input 
                  class="form-check-input" 
                  type="checkbox" 
                  id="notificacaoAtiva" 
                  checked>
                <label class="form-check-label fw-bold" for="notificacaoAtiva">
                  Notifica√ß√£o Ativa
                </label>
                <div class="form-text">Desmarque para criar a notifica√ß√£o como inativa</div>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            <i class="fas fa-times me-1"></i>Cancelar
          </button>
          <button type="button" class="btn btn-primary" id="salvarNotificacao">
            <i class="fas fa-save me-1"></i>Salvar Notifica√ß√£o
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Gerenciamento de Stages (Etapas) -->
  <div id="modalGerenciarStages" class="modal fade" tabindex="-1" aria-labelledby="modalGerenciarStagesLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-stages">
      <div class="modal-content">
        <div class="modal-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
          <h5 class="modal-title" id="modalGerenciarStagesLabel">
            <i class="fas fa-sliders-h me-2"></i>Gerenciar Etapas do CRM
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        
        <div class="modal-body">
          <!-- Aviso de stages padr√£o -->
          <div id="avisoStagesPadrao" style="display: none;">
            <i class="bi bi-info-circle"></i>
            <strong>Usando etapas padr√£o.</strong> Personalize as etapas para sua empresa abaixo.
          </div>

          <!-- Lista de stages -->
          <div>
            <h6 class="mb-2"><i class="bi bi-list-ul me-1"></i> Etapas Configuradas</h6>
            <p class="text-muted small mb-3">Arraste para reordenar as etapas</p>
            <div id="listaStagesContainer"></div>
          </div>

          <!-- Bot√£o para adicionar novo stage -->
          <button class="btn btn-adicionar-stage" onclick="adicionarNovoStage()">
            <i class="fas fa-plus me-2"></i>Adicionar Nova Etapa
          </button>

          <!-- Formul√°rio de stage (oculto inicialmente) -->
          <div id="formStageContainer">
            <h6 id="tituloFormStage">Adicionar Nova Etapa</h6>
            
            <div class="form-stage-grid">
              <div>
                <label for="stageNome" class="form-label">Nome da Etapa</label>
                <input type="text" class="form-control" id="stageNome" placeholder="Ex: Negocia√ß√£o">
              </div>
              
              <div class="color-picker-wrapper">
                <label for="stageCor" class="form-label">Cor</label>
                <input type="color" class="form-control" id="stageCor" value="#2196F3">
              </div>
              
              <div class="form-stage-full">
                <label for="stageId" class="form-label">ID da Etapa</label>
                <input type="text" class="form-control" id="stageId" placeholder="Ex: negociacao" readonly>
                <small class="text-muted">ID √∫nico gerado automaticamente</small>
              </div>
            </div>

            <div class="form-stage-actions">
              <button class="btn btn-secondary" onclick="cancelarEdicaoStage()">Cancelar</button>
              <button class="btn btn-primary" id="btnSalvarStage" onclick="salvarStage()">Adicionar</button>
            </div>
          </div>
        </div>

        <div class="modal-footer modal-footer-stages">
          <div class="btn-group-left">
            <button type="button" class="btn btn-resetar-stages" onclick="resetarStagesPadrao()">
              <i class="fas fa-undo me-1"></i>Resetar para Padr√£o
            </button>
          </div>
          <div class="btn-group-right">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="button" class="btn btn-success" onclick="salvarStagesNoBackend()">
              <i class="fas fa-save me-1"></i>Salvar Configura√ß√µes
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Cria√ß√£o de Empresa -->
  <div id="modalCriarEmpresa" class="modal fade" tabindex="-1" aria-labelledby="modalCriarEmpresaLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header bg-success text-white">
          <h5 class="modal-title" id="modalCriarEmpresaLabel">
            <i class="fas fa-building me-2"></i>Criar Nova Empresa
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="formCriarEmpresa">
            <!-- Nome da Empresa -->
            <div class="mb-3">
              <label for="nomeEmpresaModal" class="form-label fw-bold">
                Nome da Empresa <span class="text-danger">*</span>
              </label>
              <input type="text" class="form-control" id="nomeEmpresaModal" placeholder="Digite o nome da empresa" required>
              <div class="invalid-feedback">Por favor, insira o nome da empresa.</div>
            </div>

            <!-- ID da Conta de An√∫ncio -->
            <div class="mb-3">
              <label for="idContaAnuncioModal" class="form-label fw-bold">
                ID da Conta de An√∫ncio <span class="text-danger">*</span>
              </label>
              <input type="text" class="form-control" id="idContaAnuncioModal" placeholder="Digite o ID da conta de an√∫ncio" required>
              <div class="form-text">ID da conta de an√∫ncio no Facebook/Instagram Ads</div>
              <div class="invalid-feedback">Por favor, insira o ID da conta de an√∫ncio.</div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            <i class="fas fa-times me-1"></i>Cancelar
          </button>
          <button type="button" class="btn btn-success" id="btnSalvarEmpresa">
            <i class="fas fa-save me-1"></i>Salvar Empresa
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Cria√ß√£o de Usu√°rio -->
  <div id="modalCriarUsuario" class="modal fade" tabindex="-1" aria-labelledby="modalCriarUsuarioLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header bg-info text-white">
          <h5 class="modal-title" id="modalCriarUsuarioLabel">
            <i class="fas fa-user-plus me-2"></i>Criar Novo Usu√°rio
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="formCriarUsuario">
            <!-- Nome do Usu√°rio -->
            <div class="mb-3">
              <label for="nomeUsuarioModal" class="form-label fw-bold">
                Nome Completo <span class="text-danger">*</span>
              </label>
              <input type="text" class="form-control" id="nomeUsuarioModal" placeholder="Digite o nome completo do usu√°rio" required>
              <div class="invalid-feedback">Por favor, insira o nome do usu√°rio.</div>
            </div>

            <!-- Email do Usu√°rio -->
            <div class="mb-3">
              <label for="emailUsuarioModal" class="form-label fw-bold">
                Email de Acesso <span class="text-danger">*</span>
              </label>
              <input type="email" class="form-control" id="emailUsuarioModal" placeholder="Digite o email de acesso" required>
              <div class="form-text">Este email ser√° usado para fazer login no sistema</div>
              <div class="invalid-feedback">Por favor, insira um email v√°lido.</div>
            </div>

            <!-- Senha do Usu√°rio -->
            <div class="mb-3">
              <label for="senhaUsuarioModal" class="form-label fw-bold">
                Senha de Acesso <span class="text-danger">*</span>
              </label>
              <input type="password" class="form-control" id="senhaUsuarioModal" placeholder="Digite a senha" required>
              <div class="form-text">M√≠nimo de 6 caracteres</div>
              <div class="invalid-feedback">Por favor, insira uma senha v√°lida.</div>
            </div>

            <!-- Permiss√£o do Usu√°rio -->
            <div class="mb-3">
              <label for="permissaoUsuarioModal" class="form-label fw-bold">
                N√≠vel de Permiss√£o <span class="text-danger">*</span>
              </label>
              <select class="form-select" id="permissaoUsuarioModal" required>
                <option value="">Selecione o n√≠vel de permiss√£o...</option>
                <option value="ADMIN">Administrador</option>
                <option value="GESTOR">Gestor</option>
                <option value="USER">Usu√°rio</option>
              </select>
              <div class="form-text">
                <strong>Admin:</strong> Acesso total ao sistema<br>
                <strong>Gestor:</strong> Gerencia empresas espec√≠ficas<br>
                <strong>Usu√°rio:</strong> Acesso limitado √† sua empresa
              </div>
              <div class="invalid-feedback">Por favor, selecione um n√≠vel de permiss√£o.</div>
            </div>

            <!-- Empresas do Usu√°rio -->
            <div class="mb-3" id="campoEmpresasUsuario">
              <label class="form-label fw-bold">
                <i class="fas fa-building me-1"></i>
                Empresas Vinculadas
              </label>
              <div class="form-text mb-2">Selecione as empresas que este usu√°rio poder√° acessar:</div>
              <div id="empresasUsuarioCheckboxes" class="border rounded p-3" style="max-height: 200px; overflow-y: auto;">
                <div class="text-center text-muted py-3">
                  <i class="fas fa-spinner fa-spin"></i> Carregando empresas...
                </div>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            <i class="fas fa-times me-1"></i>Cancelar
          </button>
          <button type="button" class="btn btn-info" id="btnSalvarUsuario">
            <i class="fas fa-save me-1"></i>Salvar Usu√°rio
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Cria√ß√£o de Proposta -->
  <div id="modalCriarProposta" class="modal fade" tabindex="-1" aria-labelledby="modalCriarPropostaLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title" id="modalCriarPropostaLabel">
            <i class="fas fa-plus me-2"></i>Criar Nova Proposta
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="formCriarProposta">
            <!-- Nome da Proposta -->
            <div class="mb-3">
              <label for="nomeProposta" class="form-label fw-bold">
                Nome da Proposta <span class="text-danger">*</span>
              </label>
              <input type="text" class="form-control" id="nomeProposta" placeholder="Digite o nome da proposta" required>
              <div class="invalid-feedback">Por favor, insira o nome da proposta.</div>
            </div>

            <!-- Pedir WhatsApp -->
            <div class="mb-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="pedirWhatsapp">
                <label class="form-check-label fw-bold" for="pedirWhatsapp">
                  <i class="fab fa-whatsapp text-success me-1"></i>
                  Solicitar contato via WhatsApp
                </label>
                <div class="form-text">Quando marcado, a proposta incluir√° um campo para solicitar o WhatsApp do cliente.</div>
              </div>
            </div>

            <!-- Tipo da Proposta -->
            <div class="mb-4">
              <label class="form-label fw-bold">
                Tipo da Proposta <span class="text-danger">*</span>
              </label>
              <div class="d-flex gap-4 mt-2">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="tipoProposta" id="tipoArquivo" value="arquivo">
                  <label class="form-check-label" for="tipoArquivo">
                    <i class="fas fa-file-pdf text-danger me-1"></i>
                    Arquivo (PDF, DOC, etc.)
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="tipoProposta" id="tipoCanva" value="canva">
                  <label class="form-check-label" for="tipoCanva">
                    <i class="fas fa-link text-primary me-1"></i>
                    Link do Canva
                  </label>
                </div>
              </div>
              <div class="invalid-feedback d-block" id="tipoPropostaError" style="display: none;">
                Por favor, selecione o tipo da proposta.
              </div>
            </div>

            <!-- Campo para Upload de Arquivo -->
            <div class="mb-3" id="campoArquivo" style="display: none;">
              <label for="arquivoProposta" class="form-label fw-bold">
                Arquivo da Proposta <span class="text-danger">*</span>
              </label>
              <input type="file" class="form-control" id="arquivoProposta" accept=".pdf,.doc,.docx,.jpg,.png">
              <div class="form-text">Formatos aceitos: PDF, DOC, DOCX, JPG, PNG (m√°x. 10MB)</div>
              <div class="invalid-feedback">Por favor, selecione um arquivo.</div>
            </div>

            <!-- Campo para Link do Canva -->
            <div class="mb-3" id="campoCanva" style="display: none;">
              <label for="linkCanva" class="form-label fw-bold">
                Link do Canva <span class="text-danger">*</span>
              </label>
              <input type="url" class="form-control" id="linkCanva" placeholder="https://www.canva.com/design/...">
              <div class="form-text">Cole aqui o link compartilh√°vel do seu design no Canva</div>
              <div class="invalid-feedback">Por favor, insira um link v√°lido do Canva.</div>
            </div>

            <!-- Campo para Sele√ß√£o de Empresa -->
            <div class="mb-3" id="campoEmpresaProposta">
              <label class="form-label fw-bold">
                <i class="fas fa-building me-1"></i>
                Empresa para a Proposta
              </label>
              <div class="form-text mb-2">Selecione a empresa para qual esta proposta ser√° criada:</div>
              <select id="empresaProposta" class="form-select">
                <option value="">Carregando empresas...</option>
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            <i class="fas fa-times me-1"></i>Cancelar
          </button>
          <button type="button" class="btn btn-primary" id="btnSalvarProposta">
            <i class="fas fa-save me-1"></i>Salvar Proposta
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Configurar N√∫meros de Notifica√ß√£o -->
  <div id="modalConfigNumeros" class="modal fade" tabindex="-1" aria-labelledby="modalConfigNumerosLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header bg-warning text-dark">
          <h5 class="modal-title" id="modalConfigNumerosLabel">
            <i class="fas fa-phone-alt me-2"></i>N√∫meros para Notifica√ß√£o de Saldo Baixo
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Formul√°rio para adicionar n√∫mero -->
          <div class="card mb-3">
            <div class="card-header bg-light">
              <h6 class="mb-0">
                <i class="fas fa-plus-circle me-2"></i>Adicionar Novo N√∫mero
              </h6>
            </div>
            <div class="card-body">
              <form id="formAdicionarNumero">
                <div class="mb-3">
                  <label for="numeroTelefone" class="form-label fw-bold">
                    N√∫mero de Telefone <span class="text-danger">*</span>
                  </label>
                  <input 
                    type="tel" 
                    class="form-control" 
                    id="numeroTelefone" 
                    placeholder="(41) 99661-6801"
                    required>
                  <div class="form-text">N√∫mero com DDD. Ex: 41996616801</div>
                  <div class="invalid-feedback">Por favor, insira um n√∫mero v√°lido.</div>
                </div>
                <button type="submit" class="btn btn-success">
                  <i class="fas fa-plus me-1"></i>Adicionar N√∫mero
                </button>
              </form>
            </div>
          </div>

          <!-- Lista de n√∫meros cadastrados -->
          <div class="card">
            <div class="card-header bg-light">
              <h6 class="mb-0">
                <i class="fas fa-list me-2"></i>N√∫meros Cadastrados
              </h6>
            </div>
            <div class="card-body">
              <div id="listaNumerosNotificacao" class="table-responsive" style="max-height: 300px; overflow-y: auto;">
                <table class="table table-hover">
                  <thead>
                    <tr>
                      <th>N√∫mero</th>
                      <th>√öltima Notifica√ß√£o</th>
                      <th style="width: 80px;">A√ß√µes</th>
                    </tr>
                  </thead>
                  <tbody id="tabelaNumerosBody">
                    <tr>
                      <td colspan="3" class="text-center text-muted py-4">
                        <i class="fas fa-phone-slash fa-2x mb-2"></i><br>
                        Nenhum n√∫mero cadastrado ainda.
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          
          <div class="alert alert-info mt-3" role="alert">
            <i class="fas fa-info-circle me-2"></i>
            <small>Estes n√∫meros receber√£o notifica√ß√µes autom√°ticas quando houver empresas com saldo abaixo de R$90,00</small>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            <i class="fas fa-times me-1"></i>Fechar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para visualizar imagem do an√∫ncio -->
  <div class="modal fade" id="modalImagemAnuncio" tabindex="-1" aria-labelledby="modalImagemAnuncioLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalImagemAnuncioLabel">Criativo do An√∫ncio</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center">
          <img id="imagemExpandida" src="" alt="Criativo" class="img-fluid rounded" style="max-height: 70vh;">
          <div class="mt-3">
            <p id="infoAnuncio" class="text-muted mb-2"></p>
            <div class="d-flex justify-content-center gap-3">
              <small class="text-muted">
                <i class="fas fa-eye me-1"></i>
                <span id="visualizacoesModal">0</span> visualiza√ß√µes
              </small>
              <small class="text-muted">
                <i class="fas fa-users me-1"></i>
                <span id="alcanceModal">0</span> alcance
              </small>
              <small class="text-muted">
                <i class="fas fa-dollar-sign me-1"></i>
                R$ <span id="cplModal">0.00</span> CPL
              </small>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
          <a id="linkImagemOriginal" href="" target="_blank" class="btn btn-primary">
            <i class="fas fa-external-link-alt me-1"></i>
            Ver Original
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Trackeamento Avan√ßado -->
<div id="modalTrackeamentoAvancado" class="modal-overlay-qualificado" style="display:none;z-index:2000;">
  <div class="modal-content-qualificado" style="max-width: 420px;" onclick="event.stopPropagation()">
    <div class="modal-header-qualificado">
      <h4><i class="fas fa-bullseye text-primary"></i> Trackeamento Avan√ßado</h4>
      <button class="btn-close-modal" onclick="fecharModalTrackeamento()">&times;</button>
    </div>
    <div class="modal-body-qualificado">
      <div class="mb-3">
        <label for="inputApiPixelMeta" class="form-label">Chave da API do Pixel Meta</label>
        <input type="text" id="inputApiPixelMeta" class="form-control" placeholder="Cole aqui a chave do pixel Meta...">
      </div>
      <div class="mb-2">
        <small class="text-muted">Esta chave ser√° usada para enviar leads qualificados para o Meta (Facebook) via API de Convers√µes.</small>
      </div>
    </div>
    <div class="modal-footer-qualificado">
      <button class="btn btn-secondary" onclick="fecharModalTrackeamento()">Cancelar</button>
      <button class="btn btn-primary" onclick="salvarChaveTrackeamento()">Salvar</button>
    </div>
  </div>
</div>

  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/toastSystem.js"></script>
  <script src="js/loadingUtils.js"></script>
  <script src="js/main.js"></script>
  <script src="js/logicaPaineis.js"></script>
  <script src="js/crm.js"></script>
  <script src="js/stageManager.js"></script>
  <script src="js/painelDeMetricas.js"></script>
  <script src="js/notificacoes.js"></script>
  <script src="js/usuarioView.js"></script>
  <script src="js/AnuncioLogicaAnalise.js"></script>
  <script src="js/propostas.js"></script>
  
  <script>
    // Debug script para verificar se os elementos existem
    document.addEventListener('DOMContentLoaded', function() {
      setTimeout(() => {
        console.log("=== DEBUG PROPOSTAS ===");
        console.log("painelProposta existe:", !!document.getElementById('painelProposta'));
        console.log("btnCriarProposta existe:", !!document.getElementById('btnCriarProposta'));
        console.log("modalCriarProposta existe:", !!document.getElementById('modalCriarProposta'));
        console.log("PropostaManager dispon√≠vel:", typeof PropostaManager !== 'undefined');
        console.log("propostaManager instanciado:", typeof propostaManager !== 'undefined' && !!propostaManager);
        console.log("=== FIM DEBUG ===");
      }, 1000);
    });
  </script>
</body>
</html>
